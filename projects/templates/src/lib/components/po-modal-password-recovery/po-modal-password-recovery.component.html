<po-modal
  #recoveryModal
  p-hide-close
  p-size="auto"
  [p-components-size]="componentsSize"
  [p-primary-action]="primaryAction"
  [p-secondary-action]="secondaryAction"
  [p-title]="modalTitle"
>
  <div class="po-modal-password-recovery-wrapper">
    @switch (modalType) {
      @case ('email') {
        <div class="po-modal-password-recovery-content po-row">
          <div class="po-modal-password-recovery-text po-md-12 po-mb-1">
            {{ emailModalPhrases.firstPhrase }}
          </div>
          <div class="po-mb-2 po-md-12">
            <form #emailForm="ngForm">
              @if (modalPasswordRecoveryTypeAll) {
                <div>
                  <po-radio-group
                    name="type"
                    [(ngModel)]="chosenTypeFormOption"
                    [p-options]="typeFormOptions"
                    [p-size]="componentsSize"
                    (p-change)="getInputType($event)"
                  >
                  </po-radio-group>
                </div>
              }

              <div class="po-mt-1">
                @if (type === 'email' || type === 'all') {
                  <po-email
                    name="email"
                    [(ngModel)]="email"
                    p-required
                    [p-label]="literals.insertEmail"
                    [p-size]="componentsSize"
                    (p-change-model)="formModelChangesCheck(emailForm)"
                  >
                  </po-email>
                }

                @if (type === 'sms') {
                  <po-input
                    name="sms"
                    [(ngModel)]="phone"
                    p-icon="ICON_TELEPHONE"
                    p-required
                    [p-label]="literals.insertPhone"
                    [p-mask]="phoneMask"
                    [p-maxlength]="maxLength"
                    [p-minlength]="minLength"
                    [p-size]="componentsSize"
                    (p-change-model)="formModelChangesCheck(emailForm)"
                  >
                  </po-input>
                }
              </div>

              <div class="po-field-container-bottom po-field-container-error-container">
                @if (invalidEmail && control.dirty) {
                  <po-modal-password-recovery-error-message
                    [p-text]="type === 'sms' ? literals.phoneErrorMessagePhrase : literals.emailErrorMessagePhrase"
                  >
                  </po-modal-password-recovery-error-message>
                }
              </div>
            </form>
          </div>
          <div class="po-modal-password-recovery-text po-md-12">
            {{ emailModalPhrases.secondPhrase }}
            @if (contactEmail) {
              <span>
                {{ literals.prepositionIn }}
                <a class="po-modal-password-recovery-link" href="mailto:{{ contactEmail }}" target="_self">
                  {{ contactEmail }}
                </a>
              </span>
            }
            {{ endpoint }}
          </div>
        </div>
      }

      @case ('smsCode') {
        <div #smsCodeModal class="po-modal-password-recovery-content po-row">
          <div class="po-modal-password-recovery-text po-md-12 po-mb-1">{{ literals.sentSmsCodePhrase }}</div>
          <div class="po-mb-2 po-md-12">
            <form #smsCodeForm="ngForm">
              <po-input
                name="sms"
                [(ngModel)]="smsCode"
                p-maxlength="11"
                p-minlength="11"
                p-required
                [p-label]="literals.insertCode"
                [p-mask]="codeMask"
                [p-size]="componentsSize"
                (p-change-model)="formModelChangesCheck(smsCodeForm)"
              >
              </po-input>
              <div class="po-field-container-bottom po-field-container-error-container">
                @if (invalidEmail) {
                  <po-modal-password-recovery-error-message
                    [p-text]="smsCodeErrorMessage || this.literals.smsCodeErrorMessagePhrase"
                  >
                  </po-modal-password-recovery-error-message>
                }
                @if (showCustomCodeError) {
                  <po-modal-password-recovery-error-message [p-text]="codeError">
                  </po-modal-password-recovery-error-message>
                }
              </div>
            </form>
          </div>
          <div class="po-modal-password-recovery-text po-md-12">
            {{ literals.sendAgainPhrase }}
            <span class="po-modal-password-recovery-link" (click)="resendSmsCode()">{{ literals.sendAgain }}</span>
          </div>
        </div>
      }

      @case ('confirmation') {
        <div #confirmationModal class="po-modal-password-recovery-content po-row">
          <img class="po-modal-password-recovery-user-image po-mb-2" src="./assets/images/email-sent.svg" />
          <div class="po-modal-password-recovery-text">
            {{ literals.emailSentConfirmationPhrase }}
          </div>
        </div>
      }
    }
  </div>
</po-modal>
