<div class="po-calendar-wrapper">
  @if (isDayVisible) {
    <po-calendar-header
      [p-hide-previous]="isEndPart"
      [p-hide-next]="isStartPart && !responsive"
      (p-previous)="onPreviousMonth()"
      (p-next)="onNextMonth()"
    >
      <span class="po-clickable po-mr-1" (click)="selectDisplayMode('month')">{{ displayMonth }}</span>
      <span class="po-clickable" (click)="selectDisplayMode('year')">{{ displayYear }}</span>
    </po-calendar-header>
    <div class="po-calendar-content">
      <div class="po-calendar-labels">
        @for (weekDay of displayWeekDays; track weekDay) {
          <div class="po-calendar-label">
            {{ weekDay }}
          </div>
        }
      </div>
      <div class="po-calendar-content-list-day">
        @for (day of displayDays; track day) {
          <div
            class="po-calendar-day"
            [ngClass]="getDayBackgroundColor($any(day))"
            (click)="onSelectDate($any(day))"
            (mouseenter)="onMouseEnter(day)"
            (mouseleave)="onMouseLeave()"
            attr-calendar
          >
            @if (day !== 0) {
              <span [ngClass]="getDayForegroundColor($any(day))">
                {{ $any(day).getDate() }}
              </span>
            }
          </div>
        }
      </div>
    </div>
  }

  @if (isMonthVisible) {
    <po-calendar-header (p-previous)="updateYear(-1)" (p-next)="updateYear(1)">
      <span class="po-clickable" (click)="selectDisplayMode('year')">
        {{ displayYear }}
      </span>
    </po-calendar-header>
    <div class="po-calendar-content">
      <div class="po-calendar-labels">
        <div class="po-calendar-label">
          {{ monthLabel }}
        </div>
      </div>
      <div class="po-calendar-content-list-month">
        @for (month of displayMonths; track month; let i = $index) {
          <div
            class="po-calendar-month"
            [ngClass]="getBackgroundColor(i, displayMonthNumber)"
            (click)="onSelectMonth(displayYear, i)"
            attr-calendar
          >
            <span [ngClass]="getForegroundColor(i, displayMonthNumber)">
              {{ month }}
            </span>
          </div>
        }
      </div>
    </div>
  }

  @if (isYearVisible) {
    <po-calendar-header (p-previous)="updateYear(-10)" (p-next)="updateYear(10)">
      {{ displayStartDecade }} - {{ displayFinalDecade }}
    </po-calendar-header>
    <div class="po-calendar-content">
      <div class="po-calendar-labels">
        <div class="po-calendar-label">
          {{ yearLabel }}
        </div>
      </div>
      <div class="po-calendar-content-list-year">
        @for (year of displayDecade; track year; let i = $index) {
          <div
            class="po-calendar-year"
            [ngClass]="getBackgroundColor(year, currentYear)"
            (click)="onSelectYear(year, displayMonthNumber)"
            attr-calendar
          >
            <span [ngClass]="getForegroundColor(year, currentYear)">
              {{ year }}
            </span>
          </div>
        }
      </div>
    </div>
  }

  @if (!range) {
    <div class="po-calendar-footer">
      <div class="po-calendar-footer-today">
        <button
          type="button"
          class="po-calendar-footer-today-button"
          (click)="onSelectDate(today)"
          (keydown.enter)="onSelectDate(today)"
          (keydown.space)="onSelectDate(today)"
          [disabled]="isTodayUnavailable()"
        >
          {{ displayToday }}
        </button>
      </div>
    </div>
  }
</div>
