<style>
  .manager-flex {
    display: flex;
    justify-content: space-between;
    margin-block: 0.5em;
  }

  .manager-flex-button {
    display: flex;
    justify-content: end;
    margin: 10px;
  }
</style>

<div class="manager-flex-button">
  <po-button p-kind="tertiary" p-icon="po-icon po-icon-settings"> </po-button>
</div>

<kendo-grid
  (selectionChange)="onSelectionChange($event)"
  (add)="addHandler($event)"
  (cellClick)="editHandler($event)"
  [data]="gridData"
  [kendoGridBinding]="gridView"
  kendoGridSelectBy="id"
  [sortable]="sortable"
  [resizable]="resizable"
  [groupable]="groupable"
  [pageSize]="pageSize"
  [height]="height"
  [pageable]="pageable"
  [reorderable]="reordable"
>
  <ng-template kendoGridToolbarTemplate>
    <po-button *ngIf="filterProperties" p-label="Filtrar dados" (p-click)="modal.open()"> </po-button>

    <po-button
      *ngIf="actionDelete"
      p-label="DELETE"
      [p-danger]="true"
      p-icon="po-icon-delete"
      (p-click)="delete()"
      [p-disabled]="selectedRows.length > 1 || selectedRows.length === 0"
    ></po-button>

    <button *ngIf="actionPDF" class="po-button po-button-primary" kendoGridPDFCommand icon="file-pdf">
      Export to PDF
    </button>

    <po-input name="input" p-placeholder="Search in all columns..." kendoTextBox (input)="onFilter($event)"> </po-input>

    <!-- edição -->
    <button kendoGridAddCommand class="po-button po-button-primary" *ngIf="!isInEditingMode && formGroupConfig">
      Add new
    </button>
    <div *ngIf="isInEditingMode && formGroupConfig" style="display: flex; gap: 8px">
      <po-button p-label="Save" class="mr-2" [p-disabled]="!formGroup.valid" (p-click)="saveCurrent()"></po-button>
      <po-button p-label="Cancel" [p-danger]="true" (p-click)="cancelHandler()"></po-button>
    </div>
  </ng-template>
  <kendo-grid-checkbox-column
    *ngIf="selectable"
    class="po-checkbox"
    [width]="45"
    [headerClass]="{ 'text-center': true }"
    [class]="{ 'text-center': true }"
    [resizable]="false"
    [columnMenu]="false"
    [showSelectAll]="true"
  ></kendo-grid-checkbox-column>
  <kendo-grid-column
    *ngFor="let column of columnsTable"
    [field]="column"
    [title]="column"
    [width]="125"
    [sticky]="columnsFixed.includes(column)"
  >
  </kendo-grid-column>

  <!-- apenas para baixar o PDF -->
  <kendo-grid-pdf fileName="Products.pdf" [allPages]="true" paperSize="A4" [repeatHeaders]="true" [landscape]="true">
    <kendo-grid-pdf-margin top="2cm" left="1cm" right="1cm" bottom="2cm"></kendo-grid-pdf-margin>
    <ng-template kendoGridPDFTemplate let-pageNum="pageNum" let-totalPages="totalPages">
      <div class="page-template">
        <div class="header">
          <div style="float: right">Page {{ pageNum }} of {{ totalPages }}</div>
          Multi-page grid with automatic page breaking
        </div>
        <div class="footer">Page {{ pageNum }} of {{ totalPages }}</div>
      </div>
    </ng-template>
  </kendo-grid-pdf>
</kendo-grid>

<!-- filtro -->

<po-modal #modal p-title="PO Modal">
  <div class="window-content" *ngIf="filterProperties">
    <kendo-filter #filter [filters]="filterProperties" [value]="filterValue"> </kendo-filter>

    <button kendoButton (click)="applyFilter(filter.value)">Apply filter</button>
  </div>
</po-modal>

<!-- reordenar -->

<po-modal #modaldois p-title="PO Modal"> </po-modal>

<po-popover [p-target]="poButton">
  <div *ngFor="let column of columnsTable" class="manager-flex">
    {{ column }}
    <div style="display: flex; gap: 0.5em">
      <po-button
        (p-click)="ordenar('cima', column)"
        p-icon="po-icon po-icon-arrow-up"
        [p-disabled]="verifyArrowDisabled('cima', column)"
      ></po-button>
      <po-button
        (p-click)="ordenar('baixo', column)"
        p-icon="po-icon po-icon-arrow-down"
        [p-disabled]="verifyArrowDisabled('baixo', column)"
      ></po-button>
    </div>
  </div>
</po-popover>
