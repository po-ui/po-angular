name: Notificar Discord ao Criar Issue ou Discuss√£o

# Define em quais situa√ß√µes esse workflow ser√° executado
on:
  issues:
    types:
      - opened
  discussion:
    types:
      - created

# Os jobs s√£o conjuntos de actions que s√£o executados na mesma m√°quina virtual.
# √â poss√≠vel ter mais de um job e assim executar a√ß√µes paralelamente.
jobs:
  discord_notification_on_issue_or_discussion:
    runs-on: ubuntu-latest
    steps:
      - name: Notify Discord on Issue or Discussion
        env:
          DISCORD_WEBHOOK_URL_ISSUES: ${{ secrets.DISCORD_WEBHOOK_URL_ISSUES }}
        run: |
          if [ "${{ github.event_name }}" == "issues" ]; then
            AUTHOR="${{ github.event.issue.user.login }}"
            TITLE="${{ github.event.issue.title }}"
            URL="${{ github.event.issue.html_url }}"
            TYPE="Issue"
            ICON="üìã"
          else
            AUTHOR="${{ github.event.discussion.user.login }}"
            TITLE="${{ github.event.discussion.title }}"
            URL="${{ github.event.discussion.html_url }}"
            TYPE="Discuss√£o"
            ICON="üí¨"
          fi
          
          curl -X POST -H "Content-Type: application/json" \
          -d "{\"content\": \"$ICON **Nova $TYPE Criada $ICON**\\n- Autor: $AUTHOR\\n- T√≠tulo: $TITLE\\n- Link: $URL\"}" \
          $DISCORD_WEBHOOK_URL_ISSUES